<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Coding Challenge 3</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h1>Coding Challenge 3</h1>
    <button onclick="run()">Run</button>
    <div class="result" id="result"></div>
  </div>

  <script>
    'use strict';

    function run() {
      // T·∫°o map m·ªõi m·ªói l·∫ßn b·∫•m Run ƒë·ªÉ tr√°nh b·ªã x√≥a 64 r·ªìi b·∫•m l·∫°i b·ªã m·∫•t d·ªØ li·ªáu
      const gameEvents = new Map([
        [17, '‚öΩ GOAL'],
        [36, 'üîÅ Substitution'],
        [47, '‚öΩ GOAL'],
        [61, 'üîÅ Substitution'],
        [64, 'üü® Yellow card'],
        [69, 'üü• Red card'],
        [70, 'üîÅ Substitution'],
        [72, 'üîÅ Substitution'],
        [76, '‚öΩ GOAL'],
        [80, '‚öΩ GOAL'],
        [92, 'üü® Yellow card'],
      ]);

      let ketLuan = '';

      // 1) T·∫°o m·∫£ng c√°c s·ª± ki·ªán kh√¥ng tr√πng l·∫∑p
      const eventsValueIterator = gameEvents.values();     // iterator
      const eventsValueArray = [...eventsValueIterator];   // array
      const eventsValueSet = new Set(eventsValueArray);    // set (unique)
      const eventsValue = [...eventsValueSet];             // array l·∫°i

      ketLuan += `1. C√°c s·ª± ki·ªán x·∫£y ra trong tr·∫≠n (kh√¥ng tr√πng): ${eventsValue.join(', ')}\n\n`;

      // 2) X√≥a s·ª± ki·ªán ·ªü ph√∫t 64
      gameEvents.delete(64);

      // Map kh√¥ng join ƒë∆∞·ª£c, ph·∫£i chuy·ªÉn n√≥ sang m·∫£ng ƒë·ªÉ hi·ªÉn th·ªã
      const gameEventsAfterDelete = [...gameEvents.entries()]
        .map(([minute, event]) => `${minute}: ${event}`)
        .join(' | ');

      ketLuan += `2. Ph√∫t 64 c√≥ th·∫ª v√†ng b·ªã oan ‚Üí ƒë√£ x√≥a.\n`;
      ketLuan += `   Danh s√°ch s·ª± ki·ªán sau khi x√≥a: ${gameEventsAfterDelete}\n\n`;

      // 3) T√≠nh trung b√¨nh (theo ƒë·ªÅ: 90 ph√∫t)
      const eventCount = gameEvents.size;
      const avgEvent = 90 / eventCount;

      ketLuan += `3. Trung b√¨nh c·ª© m·ªói ${avgEvent.toFixed(2)} ph√∫t l·∫°i c√≥ 1 s·ª± ki·ªán x·∫£y ra (t√≠nh theo 90 ph√∫t)\n\n`;

      // 4) In ra FIRST HALF / SECOND HALF
      ketLuan += `4. Log theo hi·ªáp:\n`;

      for (const [minute, event] of gameEvents) {
        const half = minute <= 45 ? 'FIRST' : 'SECOND';
        ketLuan += `[${half} HALF] ${minute}: ${event}\n`;
      }

      // In k·∫øt qu·∫£ ra m√†n h√¨nh (ƒë·∫∑t trong run)
      const result = document.getElementById('result');
      result.innerText = ketLuan;
    }
  </script>
</body>
</html>
